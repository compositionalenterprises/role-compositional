---
# defaults file for role-compositional

#
# General Vars (o7)
#
compositional_frontend_service: 'nginx'
compositional_backend_service: 'mariadb'
compositional_frontend_build: 'yes'
compositional_frontend_state: 'present'
compositional_backend_build: 'yes'
compositional_backend_state: 'present'
compositional_services:
  - 'nextcloud'
  - 'wordpress'
  - 'kanboard'

#
# Environment Vars
#
environment_domain: 'example.com'
environment_admin: 'admin'

#
# Kanboard
#
compositional_kanboard_build: yes
compositional_kanboard_state: present
compositional_kanboard_backend_password: 'testpassword'
compositional_kanboard_mysql_script: |
  CREATE DATABASE IF NOT EXISTS kanboard CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  GRANT ALTER, CREATE, DELETE, DROP, INDEX, INSERT, REFERENCES, SELECT, UPDATE ON kanboard.* TO 'kanboard'@'%' IDENTIFIED BY '{{ compositional_kanboard_backend_password }}';

#
# MySQL
#
compositional_mysql_root_password: 'testpassword'

#
# Nextcloud
#
compositional_nextcloud_build: yes
compositional_nextcloud_tag: 'latest'
compositional_nextcloud_state: present
compositional_nextcloud_backend_password: 'testpassword'
compositional_nextcloud_mysql_script: |
  CREATE USER IF NOT EXISTS 'nextcloud'@'%' IDENTIFIED BY '{{ compositional_nextcloud_backend_password }}';
  CREATE DATABASE IF NOT EXISTS nextcloud;
  GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'%' IDENTIFIED BY '{{ compositional_nextcloud_backend_password }}';
  FLUSH privileges;
compositional_nextcloud_admin_user: 'admin'
compositional_nextcloud_admin_password: 'admin'
compositional_nextcloud_legacy_dbtableprefix: False

#
# Wordpress
#
compositional_wordpress_build: yes
compositional_wordpress_state: present
compositional_wordpress_backend_password: 'testpassword'
compositional_wordpress_mysql_script: |
  CREATE DATABASE IF NOT EXISTS wordpress;
  GRANT ALL PRIVILEGES ON wordpress.* TO 'wordpress'@'%' IDENTIFIED BY '{{ compositional_wordpress_backend_password }}';

#
# Bitwarden
#
compositional_bitwarden_build: yes
compositional_bitwarden_state: present


#
# Fusion Directory
#
compositional_fusiondirectory_ldap_admin_pass: 'testpassword'
compositional_fusiondirectory_ldap_config_pass: 'testpassword'
compositional_fusiondirectory_admin_pass: 'testpassword'
compositional_fusiondirectory_build: yes
compositional_fusiondirectory_state: present

#
# Firefly
#
# This value has to be exactly 32 characters, it is the encryption key for your database and sessions
compositional_firefly_app_key: 'testtesttesttesttesttesttesttest'
compositional_firefly_build: yes
compositional_firefly_state: present
compositional_firefly_backend_password: 'testpassword'
compositional_firefly_mysql_script: |
  CREATE DATABASE IF NOT EXISTS firefly;
  GRANT ALL PRIVILEGES ON firefly.* TO 'firefly'@'%' IDENTIFIED BY '{{ compositional_firefly_backend_password }}';

#
# Manager
#
# This value has to be exactly 32 characters, it is the encryption key for your database and sessions
compositional_manager_server_version: '19.5.13'
compositional_manager_server_port: '8080'
compositional_manager_server_data_path: '/data'
compositional_manager_build: yes
compositional_manager_state: present
